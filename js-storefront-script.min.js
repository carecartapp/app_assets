var isAjax=0,isCartLoading=0,isCheckForCall=!0,isCheckForMobile=!1,cartHash_cached=0,cartHash_live=0;function getQueryParameters(){var t=window.location.search.substr(1);return null!=t&&""!=t?transformToAssocArray(t):{}}function transformToAssocArray(t){for(var e={},o=t.split("&"),a=0;a<o.length;a++){var n=o[a].split("=");e[n[0]]=n[1]}return e}function scriptInjection(t,e){var o=document.createElement("script");o.type="text/javascript",o.src=t,"function"==typeof e&&o.addEventListener("load",e),document.getElementsByTagName("head")[0].appendChild(o)}function getCustomerId(){try{let t=window.ShopifyAnalytics.meta.page.customerId;if(null!=t&&""!==t)return t}catch(t){}try{let t=window.meta.page.customerId;if(null!=t&&""!==t)return t}catch(t){}try{let t=_st.cid;if(null!=t&&""!==t)return t}catch(t){}return null}function cssFileInjection(t){var e=document.createElement("link");e.href=t,e.type="text/css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}function AbandonedCart(){var t={id:getCustomerId()},e=0,o={domain:Shopify.shop},a="https://app-er.carecart.io",n="https://cdn.jsdelivr.net/gh/carecartapp/app_assets@1.6.5/",i="pn-app-er.carecart.io",r={},c={},l=!1,s=!1;function p(t){if(t.origin===a&&t.data.hasOwnProperty("postMessageFunction")&&"string"==typeof t.data.postMessageFunction)switch(t.data.postMessageFunction){case"closeDiscountSpinnerPopup":carecartJquery("#cc-spinner-body").remove()}}function d(t){carecartJquery.ajax({url:"/cart.js",type:"GET",dataType:"JSON",success:function(e){t(e)},error:function(e){t(e.responseText)}})}function u(t){if(1!=isCartLoading){var e,n,i=getQueryParameters();return void 0!==i&&void 0!==i.recover_care_cart&&""!=i.recover_care_cart&&(isCartLoading=1,carecartJquery("body").html("Loading...."),e=i.recover_care_cart,n=function(e){m(t,e)},carecartJquery.ajax({url:a+"/api/cart/store-front/"+e,data:{store:o},success:function(t){t.records.hasOwnProperty("cart")?n(t.records.cart):window.location="/cart"}}),!0)}}function m(t,e){var n;n=function(n){var i=0,r=void 0;if((!e.items||!e.items.length>0)&&(window.location="/cart"),e.items.length>0)var c=setInterval(function(){var t,o;null==r?(r=!1,t=e.items[i],o=function(t){i++,r=!0},carecartJquery.ajax({url:"/cart/add.js",type:"POST",dataType:"JSON",data:t,success:function(t){o(t),console.log("------------- Recreation of cart started -------------"),console.log(t),console.log("------------- Recreation of cart end     -------------")}})):1==r&&(r=void 0),i==e.items.length&&(console.log("done ..... "+i),clearInterval(c))},100);var l=setInterval(function(){if(i==e.items.length){if(console.log("Products processed: "+i),clearInterval(l),null==t)return location.reload(),!1;d(function(t){var n=t.token;e.token;!function(t,e,n){var i={newToken:t,store:o};carecartJquery.ajax({url:a+"/api/cart/store-front/update-token/"+e.id,type:"POST",dataType:"json",data:i,success:function(t){n(t),console.log("------------- Update cart token started -------------"),console.log(t),console.log("------------- Update cart token end     -------------"),n(t)}})}(n,e,function(t){window.location="/cart"})})}},100)},carecartJquery.ajax({url:"/cart/clear.js",type:"GET",dataType:"JSON",success:function(t){n(t)},error:function(t){n(t.responseText)}})}function g(){var t=String(_()).match(/https?\:\/\/([^\/]*)([^\?]*).*/);return null!=t&&t.length>2?t[2]:null}function _(){return window.location.href}function b(e,o,n,i){var r=window.localStorage.getItem("timeData");if(void 0!==r){var c=new Date,l=new Date(r),p=parseInt(c-l),d=parseInt(Math.floor(p/6e4));if(d<=5)return void console.log("Time remaining : "+d)}h("cc-preview-email-collector")||(!e||e.email||0==e.item_count||t.id?("function"==typeof n&&n(),carecartJquery("#cc-atcp-table","body").length>0&&carecartJquery("#cc-atcp-table","body").remove()):o&&o.is_active&&0!=o.is_active&&(e.email||("LITE"==i?function(t,e){1==t.is_active_close_button&&"<button type='button' id='cc_f-p-close' style='position: absolute; width: unset; top: 0;right: 5px;cursor: pointer;color: #000;z-index: 100;padding: 5px;background-position: center;background-repeat: no-repeat; background-color: transparent;border: 0;-webkit-appearance: none;float: right;font-size: 1.5rem;font-weight: 700;line-height: 1;text-shadow: 0 1px 0 #fff;opacity: .5;}'>x</button>";var o=t.is_active_close_button,a=t.heading_text,n=t.heading_color.replace(/^#+/i,""),i=t.description_text,r=t.description_color.replace(/^#+/i,""),c=t.email_placeholder,l=t.button_text_color.replace(/^#+/i,""),p=t.button_background_color.replace(/^#+/i,""),d=t.button_text,u='<style>@media (max-width: 768px) {#cc-atcp-table #cc-atcp-content-body { width: 100% !important; } #cc-atcp-table{ /*position: absolute !important;*/ } } @media (max-width: 420px) {#cc-atcp-table #cc-atcp-content-body { height: 320px !important; } }</style><table id="cc-atcp-table" style="display:none;position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; border:none; text-align: center; vertical-align: middle;width: 100%; height: 100%; background-color: rgba(0,0,0,0.1); z-index: 999992"><tr><td align="center" valign="middle"><div id="cc-atcp-content-body" style="border-radius:5px;margin: 0 auto;width: 700px;height: 290px; background: white; border: 1px solid #f3f3f3;"><iframe style="border: none; height:100%; width: 100%;" src="https://app.carecart.io/email-collector-pop.html?is_active_close_button='+encodeURI(o)+"&heading_text="+encodeURI(a)+"&heading_color="+encodeURI(n)+"&description_text="+encodeURI(i)+"&description_color="+encodeURI(r)+"&button_text="+encodeURI(d)+"&email_placeholder="+encodeURI(c)+"&button_text_color="+encodeURI(l)+"&button_background_color="+encodeURI(p)+'"></iframe></div></td></tr></table>';carecartJquery("body").append(u),0==s&&(s=!0,abandonedCart.process(0,"",0,"EMAIL_COLLECTOR"));"function"==typeof e&&e()}(o,function(){carecartJquery("#cc-atcp-table","body").show()}):function(e,o){if(CCSwal.isVisible())return;if(carecartJquery("body").find("#cc-atcp-table").length>0)return!1;var n=""!=e.email_banner_public_url?e.email_banner_public_url:a+"/img/cart-popup.png",i=1==e.heading_is_bold?"bold":"normal",r=1==e.heading_is_italic?"italic":"normal",c=e.heading_font_size+"px",l=e.heading_text_align.toLowerCase(),s=e.heading_color,p=e.heading_text,d=1==e.description_is_bold?"bold":"normal",u=1==e.description_is_italic?"italic":"normal",m=e.description_font_size+"px",g=e.description_text_align.toLowerCase(),_=e.description_color,b=e.description_text,f=e.email_placeholder,w=1==e.button_is_bold?"bold":"normal",h=1==e.button_is_italic?"italic":"normal",y=e.button_font_size+"px",v=(e.button_text_align.toLowerCase(),e.button_text_color),x=e.button_text,I=e.button_background_color,k="<h2 style='text-transform: unset;font-family: Open Sans, sans-serif;font-size:"+c+";color:"+s+" ;text-align:"+l+";font-weight:"+i+";font-style: "+r+"'>"+p+"</h2>",S="<p style='text-transform: unset;font-family: Open Sans, sans-serif;font-size:"+m+";color:"+_+";text-align:"+g+";font-weight: "+d+";font-style:"+u+";'>"+b+"</p>";CCSwal.fire({title:k,html:S,input:"email",inputPlaceholder:f,inputAutoTrim:!0,confirmButtonText:"<span style='font-size:"+y+";color:"+v+";font-style:"+h+";font-weight:"+w+"'>"+x+"</span>",confirmButtonColor:I,showCancelButton:!1,cancelButtonText:"No, cancel!",showCloseButton:1==e.is_active_close_button,imageUrl:n,imageWidth:100,allowOutsideClick:!1}).then(function(e){if(e.value){t.email=e.value;var o=new Date;window.localStorage.setItem("timeData",o),abandonedCart.process(1,function(){carecartJquery('form[action="/cart/add"]').submit()},"","EMAIL_COLLECTOR")}else e.dismiss&&(o=new Date,window.localStorage.setItem("timeData",o),abandonedCart.process(0,"","","EMAIL_COLLECTOR"))}),"function"==typeof o&&o()}(o,function(){carecartJquery("#cc-atcp-table","body").show()}))))}function f(t,e){scriptInjection(n+"favico-0.3.10.min.js",function(){if(h("cc-show-title-designer"))setInterval(function(){w(t,e)},5e3);else if(t&&t.is_active&&1==t.is_active&&e>0)setInterval(function(){w(t,e)},5e3)})}function w(t,e){var o=1e3*parseInt(t.display_interval_in_seconds);(t.title_bar_text&&""!=t.title_bar_text&&(window.cc_adv_title_timer=0,window.org_title=window.document.title,window.org_title_marq=0,setTimeout(function(){window.cc_adv_title_timer>0&&(clearTimeout(window.cc_adv_title_timer),window.org_title_marq=0,window.document.title=window.org_title),window.cc_adv_title_timer=setTimeout(function(){window.org_title_marq=1,function t(e){window.document.title=e;setTimeout(function(){t(e.substr(1)+e.substr(0,1))},500)}(t.title_bar_text+"     ")},o)},1e3)),window.onblur=function(){window.org_title_marq=0},0==carecartJquery('[rel="shortcut icon"]').length&&carecartJquery("head").append('<link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMjVERTE3QzA0RTIxMUU4QjRFOUY4OEFCODE1QzgzRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMjVERTE3RDA0RTIxMUU4QjRFOUY4OEFCODE1QzgzRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAyNURFMTdBMDRFMjExRThCNEU5Rjg4QUI4MTVDODNGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAyNURFMTdCMDRFMjExRThCNEU5Rjg4QUI4MTVDODNGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+f1HuRwAAAB9JREFUeNpi/P//PwMlgImBQjBqwKgBowYMFgMAAgwAY5oDHVti48YAAAAASUVORK5CYII=" type="image/png">'),""!=t.favicon_image_public_url&&carecartJquery('[rel="shortcut icon"]').attr("href",t.favicon_image_public_url),"undefined"!=typeof Favico)&&new Favico({bgColor:t.favicon_background_color,textColor:t.favicon_text_color,animation:t.prepared_badge_animation,position:t.prepared_badge_position,type:t.prepared_badge_shape}).badge(e)}function h(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function y(t,e,o,a){var n=screen.width/2-o/2,i=screen.height/2-a/2;return window.open(t,e,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+a+", top="+i+", left="+n)}this.init=function(l,s){console.log("Initialization started"),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isCheckForMobile=!0),scriptInjection("https://code.jquery.com/jquery-3.2.1.min.js",function(){scriptInjection("https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/md5.js",function(){window.carecartJquery=jQuery.noConflict(!0),scriptInjection(n+"favico-0.3.10.min.js"),scriptInjection("https://use.fontawesome.com/e0a385ecbc.js"),cssFileInjection(n+"cc.sweetalert2.min.css"),scriptInjection(n+"cc.sweetalert2.all.min.js"),scriptInjection(n+"front-store-spinner.min.js"),function(){carecartJquery.ajaxSetup({xhrFields:{withCredentials:!0}}),carecartJquery("body").on("click","#cc_f-p-close",function(t){var e=new Date;window.localStorage.setItem("timeData",e),carecartJquery("#cc-atcp-table","body").hide()}),carecartJquery("body").on("keyup","#cc_f-p-preview-email-placeholder",function(t){carecartJquery("#cc_f-p-preview-email-placeholder-error","body").hide()}),h("cc-preview-email-collector")&&carecartJquery.ajax({url:a+"/api/cart/popupSettings?shop="+o.domain,dataType:"json",type:"GET",success:function(t){var e=t.records.addToCartPopUp;if(!CCSwal.isVisible()){if(carecartJquery("body").find("#cc-atcp-table").length>0)return!1;var o=""!=e.email_banner_public_url?e.email_banner_public_url:a+"/img/cart-popup.png",n=1==e.heading_is_bold?"bold":"normal",i=1==e.heading_is_italic?"italic":"normal",r=e.heading_font_size+"px",c=e.heading_text_align.toLowerCase(),l=e.heading_color,s=e.heading_text,p=1==e.description_is_bold?"bold":"normal",d=1==e.description_is_italic?"italic":"normal",u=e.description_font_size+"px",m=e.description_text_align.toLowerCase(),g=e.description_color,_=e.description_text,b=e.email_placeholder,f=1==e.button_is_bold?"bold":"normal",w=1==e.button_is_italic?"italic":"normal",h=e.button_font_size+"px",y=(e.button_text_align.toLowerCase(),e.button_text_color),v=e.button_text,x=e.button_background_color,I="<h2 style='text-transform: unset;font-family: Open Sans, sans-serif;font-size:"+r+";color:"+l+" ;text-align:"+c+";font-weight:"+n+";font-style: "+i+"'>"+s+"</h2>",k="<p style='text-transform: unset;font-family: Open Sans, sans-serif;font-size:"+u+";color:"+g+";text-align:"+m+";font-weight: "+p+";font-style:"+d+";'>"+_+"</p>";CCSwal.fire({title:I,html:k,input:"email",inputPlaceholder:b,inputAutoTrim:!0,confirmButtonText:"<span style='font-size:"+h+";color:"+y+";font-style:"+w+";font-weight:"+f+"'>"+v+"</span>",confirmButtonColor:x,showCancelButton:!1,cancelButtonText:"No, cancel!",showCloseButton:1==e.is_active_close_button,imageUrl:o,imageWidth:100,allowOutsideClick:!1}).then(function(t){})}}});h("cc-show-title-designer")&&function(t=1){carecartJquery.ajax({url:a+"/api/cart/cartReminderSettings?shop="+o.domain,dataType:"json",type:"GET",success:function(e){var o=e.records.titleDesigner;scriptInjection(n+"favico-0.3.10.min.js",function(){setInterval(function(){w(o,t)},1e3)})}})}(1);carecartJquery("body").on("click","#cc_f-p-preview-email-btn",function(){if(h("cc-preview-email-collector"))carecartJquery("#cc-atcp-table","body").hide();else{carecartJquery("#cc_f-p-preview-email-placeholder-error","body").hide();var e=carecartJquery("#cc_f-p-preview-email-placeholder","body").val();!function(t){if(null!=t&&null!=t&&""!=t)return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.toLowerCase())}(e)?carecartJquery("#cc_f-p-preview-email-placeholder-error","body").show():(t.email=e,abandonedCart.process(1,function(){carecartJquery('form[action="/cart/add"]').length&&"/cart"!=window.location.pathname&&carecartJquery('form[action="/cart/add"]').submit()}))}}),carecartJquery("body").on("click","#pn-optin-disallow-btn-text",function(){window.localStorage.setItem("cc-pn-subscription-popup","DENIED"),window.localStorage.setItem("cc-pn-subscription-token",""),carecartJquery("#cc_pn_notification_template").hide()}),carecartJquery("body").on("click","#pn-optin-allow-btn-text",function(){var t=encodeURIComponent(JSON.stringify(c)),e="https://"+i+"/getPnToken?cc_pn_lp="+t+"&shop="+o.domain;y(e,o.domain,"400px","400px");carecartJquery("#cc_pn_notification_template").hide()});var l=window.addEventListener?"addEventListener":"attachEvent";(0,window[l])("attachEvent"==l?"onmessage":"message",function(e){var o=e.message?"message":"data",a=e[o];null!=a&&"close_email"==a&&(h("cc-preview-email-collector")?carecartJquery("#cc-atcp-table","body").show():carecartJquery("#cc-atcp-table","body").hide()),null!=a.email&&(t.email=a.email,abandonedCart.process(1,function(){0==isAjax&&carecartJquery('form[action="/cart/add"]').length&&"/cart"!=window.location.pathname&&carecartJquery('form[action="/cart/add"]').submit()}),h("cc-preview-email-collector")?carecartJquery("#cc-atcp-table","body").show():carecartJquery("#cc-atcp-table","body").hide()),"mobilefocus"==a&&carecartJquery(".fancybox-content").width()<=450&&setTimeout(function(){carecartJquery(".fancybox-content").css("width","100%")},1e3)},!1);var s=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.send=function(){var t=this,e=window.setInterval(function(){if(4==t.readyState){var o=t.responseURL,a=o.split("/"),n=a[a.length-1];isCartLoading||"add.js"!=n&&"change.js"!=n||(isAjax=1,console.log("show collector in ajax call"),abandonedCart.process(0),setTimeout(function(){carecartJquery(".mfp-wrap").css("display","block")},2e3)),clearInterval(e)}},1);return s.apply(this,[].slice.call(arguments))},carecartJquery("body").on("click","#cc-pn-disallow-subs-btn",function(){window.localStorage.setItem("cc-pn-subscription-popup","DENIED"),window.localStorage.setItem("cc-pn-subscription-token",""),carecartJquery("#cc-pn-table").hide()}),carecartJquery("body").on("click","#cc-pn-allow-subs-btn",function(){console.log("pnSubscriptionPopupData"),console.log(r);var t={title:r&&r.landing_page_title?r.landing_page_title:"",text:r&&r.landing_page_description?r.landing_page_description:"",logo_url:r&&r.landing_page_logo_url?r.landing_page_logo_url:""};t=encodeURI(JSON.stringify(t));var e="https://"+i+"/getPnToken?cc_pn_lp="+t+"&shop="+o.domain;y(e,o.domain,"400px","400px")}),carecartJquery("body").on("submit",'form[action="/cart/add"]',function(t){console.clear(),console.log("add to cart clicked...."),setTimeout(function(){isAjax=0,abandonedCart.process(0)},2e3)}),carecartJquery("body").find("#wh-whModal-container").find("form#net-order-form").on("click","button",function(t){e=1,abandonedCart.process(0)}),carecartJquery(document).on("blur","input:not(.ccswal2-input)",function(t){if(!t.originalEvent.isTrusted)return!1;if("cc_f-p-preview-email-placeholder"==carecartJquery(this).attr("id"))return!1;if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(carecartJquery(this).val()))){var e=new Date;window.localStorage.setItem("email-magnet-expiry",e),window.localStorage.setItem("cc-magnet-email-captured",carecartJquery(this).val()),console.log("email magnet is triggered")}})}(),new RegExp("cc-preview-email-collector=yes").test(window.location.href)&&b(null,null,function(){},""),console.log("Initialization completed"),"function"==typeof l&&l.apply(this,s)}),window.addEventListener("message",p,!1)})},this.process=function(n,s,p,w=""){d(function(d){1==n&&(d.is_email_captured_by_popup=1,w="EMAIL_COLLECTOR"),1==p&&(d.is_captured_by_email_magnet=1),1==e&&(d.is_email_discarded=1);var y={token:window.localStorage.getItem("cc-pn-subscription-token")?window.localStorage.getItem("cc-pn-subscription-token"):"",status:window.localStorage.getItem("cc-pn-subscription-popup")?window.localStorage.getItem("cc-pn-subscription-popup"):""};!function(){console.log("email magnet is checked");var e=window.localStorage.getItem("cc-magnet-email-captured");if(t&&!t.email&&e){var o=window.localStorage.getItem("email-magnet-expiry");if(void 0!==o){var a=new Date,n=new Date(o),i=parseInt(a-n),r=parseInt(Math.floor(i/6e4));r<=1440?e?(console.log("email is dispatched with cart"),t.email=e):(console.log("cached email not available"),localStorage.removeItem("email-magnet-expiry"),localStorage.removeItem("cc-magnet-email-captured")):(console.log("email time is expired"),localStorage.removeItem("email-magnet-expiry"),localStorage.removeItem("cc-magnet-email-captured"))}else console.log("email time is expired n/o"),localStorage.removeItem("email-magnet-expiry"),localStorage.removeItem("cc-magnet-email-captured")}else console.log("email already exits"),localStorage.removeItem("email-magnet-expiry"),localStorage.removeItem("cc-magnet-email-captured")}(),window.localStorage.getItem("cc-magnet-email-captured")&&(d.is_captured_by_email_magnet=1);var v,x,I={customer:t,cart:d,store:o,pnData:y,productPagePath:(/https?\:\/\/([^\/]*)(.*\/products[^\?]*).*/,v=String(_()),x=v.match(/https?\:\/\/([^\/]*)(.*\/products[^\?]*).*/),null!=x&&x.length>2?x[2]:null),currentPageUrlWithoutQueryParameters:g(),impressionBy:w};if(u(d))console.log("Recovering cart...");else{console.log("Update cart on command center");try{cartHash_cached=String(window.localStorage.getItem("cartHash_cached")),cartHash_live=CryptoJS.MD5(JSON.stringify(d)).toString()}catch(t){}if((cartHash_cached!=cartHash_live||""!=w)&&I.cart.item_count>0)isCheckForCall&&(isCheckForCall=!1,carecartJquery.ajax({url:a+"/api/cart/store-front/create",dataType:"json",type:"POST",data:I,success:function(e){if(isCheckForCall=!0,0==e._metadata.outcomeCode&&e.records.cart){window.localStorage.setItem("cartHash_cached",cartHash_live);var o=e.records.active_interface,n=e.records.cart,p=e.records.addToCartPopUp,d=e.records.titleDesigner;if(carecartJquery("#CartDrawer").removeAttr("tabindex"),r=e&&e.records&&e.records.pnSubscriptionPopup?e.records.pnSubscriptionPopup:{},c=e&&e.records&&e.records.pnSubscriptionPopupChildWindow?e.records.pnSubscriptionPopupChildWindow:{},window.localStorage.setItem("cc-title-bar-cached-data",JSON.stringify(d)),f(d,n.item_count),"LITE"==o?function(t){if(window.localStorage.getItem("cc-pn-subscription-popup"))return!1;if(t&&t.popup_is_active&&1==t.popup_is_active){var e=t.popup_title,o=t.popup_description_text,n=t.popup_allow_button_text,n=t.popup_allow_button_text,i=t.popup_disallow_button_text,r="",c="";""!=t.popup_logo_url&&null!=t.popup_logo_url&&(r=a+"/images/"+t.popup_logo_url,c="<img height='40px' src="+r+">");var l='<table id="cc-pn-table" style="position: fixed; top: 0px; right: 0px; bottom: 0px; left: 0px; text-align: center; vertical-align: middle;width: 100%; height: 100%; background-color: rgba(0,0,0,0.1); z-index: 999992"><tr><td align="center" valign="middle"><div id="cc-pn-content-body" style="border-radius:5px;margin: 0 auto;width: 400px; background: white; border: 1px solid #f3f3f3;"><div style="position: relative;display: -webkit-box;display: -ms-flexbox;-webkit-box-orient: vertical;-webkit-box-direction: normal;-ms-flex-direction: column;flex-direction: column;width: 100%;pointer-events: auto;background-clip: padding-box;border-radius: .3rem; outline: 0;"><div style="padding: 20px;margin: 20px 0 0 0;border-radius: 5px;"><div class="cc_preview-email-content" style="width: 100%;text-align: center;vertical-align: middle;padding: 15px;"><div class="cc_preview-email-content-container" style="position: relative;border-radius: 5px 5px 0 0;padding-top: 0;padding-bottom: 10px;margin-bottom: 10px;">'+c+'<p id="cc-pn-subs-title" class="cc_preview-email-heading" style="margin: 0 0 20px 0;font-size: 15px;font-weight: bold;">'+e+'</p><p style="margin: 0 0 10px;" id="cc-pn-subs-desc">'+o+'</p></div><div><button id="cc-pn-allow-subs-btn" type="button" style="word-break:break-all;width:40%;border: none;padding: 7px 5px;border-radius: 2px;cursor: pointer;float: left;">'+n+'</button><button id="cc-pn-disallow-subs-btn" type="button" style="word-break:break-all;width:40%;border: none;padding: 7px 5px;border-radius: 2px;cursor: pointer;float: right;">'+i+"</button></div></div></div></div></div></td></tr></table>";setTimeout(function(){carecartJquery("body").append(l)},t.popup_delay+"000")}}(r):(i="pn-app-er.carecart.io",function(t){if(window.localStorage.getItem("cc-pn-subscription-popup"))return!1;t&&t.popup_is_active&&1==t.popup_is_active&&function(t,e){var o=t.popup_title,n=t.popup_description_text,i=t.popup_allow_button_text,r=t.popup_disallow_button_text,c=t.popup_logo_public_url||a+"/img/push-not--pop.png",l=(t.appearance_location,t.is_active_powered_by),s=(t.popup_delay_in_seconds,t.pn_subscription_popup_template.html),p=(p=(p=(p=(p=(p=(p=s.replace("{CC-PN-POWERED-BY-IMG}",a+"/img/logo.png")).replace("{CC-PN-SP-IMAGE}",c)).replace("{CC-PN-SP-TITLE}",o)).replace("{CC-PN-SP-DESCRIPTION}",n)).replace("{CC-PN-SP-ALLOW-BUTTON-TEXT}",i)).replace("{CC-PN-SP-DISALLOW-BUTTON-TEXT}",r)).replace("{CC-PN-SP-BRANDED-TEXT-STATUS}",1==l?"block":"none");"function"==typeof e&&e(p)}(t,function(e){0==l&&(l=!0,setTimeout(function(){if(carecartJquery("body").append(e),carecartJquery("#cc_pn_notification_template").css({position:"fixed"}),window.innerWidth>=1012)var o="35%",a="420px";else var o="25%",a="50%";if("TOP_CENTER"==t.appearance_location?carecartJquery("#cc_pn_notification_template").css({top:"5px",left:o,width:a}):"TOP_LEFT"==t.appearance_location?carecartJquery("#cc_pn_notification_template").css({top:"5px",left:"5px"}):"TOP_RIGHT"==t.appearance_location?carecartJquery("#cc_pn_notification_template").css({top:"5px",right:"15px"}):"BOTTOM_RIGHT"==t.appearance_location&&carecartJquery("#cc_pn_notification_template").css({bottom:"0px",right:"15px"}),isCheckForMobile)if(window.innerWidth<=768&&window.innerWidth>=525){var o="20%",a="65%";"TOP_CENTER"==t.appearance_location&&carecartJquery("#cc_pn_notification_template").css({left:o,width:a})}else if(window.innerWidth<=525){var o="-8px",a="95%";carecartJquery("#cc_pn_notification_template").css({left:o,right:"2%",width:a}),carecartJquery("#pn-optin-disallow-btn-text").css({width:"auto"})}},t.popup_delay_in_seconds+"000"),abandonedCart.process(0,"",0,"PUSH_NOTIFICATION "))})}(r)),e.records.isNeedToReInsert&&m(void 0,n),e.records.hasOwnProperty("gdpr")&&null!=e.records.gdpr)!function(t){t&&t.is_active&&0!=t.is_active&&null===localStorage.getItem("gdrp_accepted_status")&&(o='<div id="carecart_gdpr_div" style="font-family: '+(e=t).notification_message_font_family+";background: "+e.bg_color+";color: "+e.notification_message_font_color+";padding: 11px 20px 20px;position: fixed;text-align: left;width: 100%;-webkit-transform: translateY(100%);transform: translateY(100%);transition: -webkit-transform .8s ease 0s;-webkit-transition: -webkit-transform .8s ease 0s;transition: transform .8s ease 0s;transition: transform .8s ease 0s,-webkit-transform .8s ease 0s;left: 0;"+String(e.notification_position).toLowerCase()+': 0;-webkit-transform: translateY(0);transform: translateY(0);z-index:999;">\n  <p style="font-family:'+e.notification_message_font_family+";  margin: 0 0 5px;font-size: 17px; color:"+e.notification_message_font_color+';">'+e.notification_message+'</p>\n  <div class="">\n    <button       onclick="abandonedCart.updateGdrpAcceptance(1)"    style="color: '+e.accept_btn_text_color+";\n    text-decoration: none;\n    background: "+e.accept_btn_bg_color+';\n    font-size: 14px;\n    border-radius: 0;\n    padding: 8px;\n    width: 140px;\n    font-weight: normal;\n    margin: 0 5px 0 0;\n    border: none !important;">'+e.accept_btn_text+'</button>\n    <button    onclick="abandonedCart.updateGdrpAcceptance(0)"    style="    color: '+e.decline_btn_text_color+";\n    text-decoration: none;\n    background: "+e.decline_btn_bg_color+';\n    font-size: 14px;\n    border-radius: 0;\n    padding: 9px;\n    width: 140px;\n    font-weight: normal;\n    margin: 0 5px 0 3px;\n    border: none !important;">'+e.decline_btn_text+"</button>\n    <button onclick=\"window.location.href = '"+e.read_more_btn_target_url+'\'" style="color: '+e.read_more_btn_text_color+";\n    text-decoration: none;\n    background: "+e.read_more_btn_bg_color+';\n    font-size: 14px;\n    border-radius: 0;\n    padding: 8px;\n    width: 140px;\n    font-weight: normal;\n    margin: 0 5px 0 0;\n    border: none !important;">'+e.read_more_btn_text+"</button>\n  </div>\n</div>",carecartJquery("body").append(o));var e,o}(e.records.gdpr);if(e.records.hasOwnProperty("discountSpinnerPopup")&&null!=e.records.discountSpinnerPopup){e.records.discountSpinnerPopup;u='<div id="cc-spinner-body" style="position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0px;\n    transform: translateX(0%);\n    transition: 0.5s;\n    position: fixed;\n    background-color: rgba(0, 0, 0, 0.4);\n    z-index: 2147483647;">\n\t<iframe src="'+a+"/api/discount-spinner-popups/store-front/iframe?store[domain]="+Shopify.shop+'" style="    width: 100%;\n    height: 100%;\n    border: 0px;\n    display: block;"></iframe>\n</div>',carecartJquery("body").append(u)}b(n,p,s,o),function(e){e&&!e.email&&carecartJquery(document).on("blur","input:not(.ccswal2-input)",function(e){if(!e.originalEvent.isTrusted)return!1;if("cc_f-p-preview-email-placeholder"==$(this).attr("id"))return!1;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(carecartJquery(this).val()))&&(t.email=carecartJquery(this).val(),abandonedCart.process(0,"",1))})}(n),window.localStorage.setItem("cartHash_cached",cartHash_live)}else{if(h("cc-show-title-designer"))f(d=e.records.titleDesigner,1)}var u}}));else if(I.cart.item_count>0){var k=window.localStorage.getItem("cc-title-bar-cached-data");if(null!=k)f(JSON.parse(window.localStorage.getItem("cc-title-bar-cached-data")),I.cart.item_count)}}})},this.updateGdrpAcceptance=function(t){localStorage.setItem("gdrp_accepted_status",t),carecartJquery("#carecart_gdpr_div").remove()},window.addEventListener("message",function(t){if(t.origin!="https://"+i)return!1;var e=t&&t.data&&t.data.token?t.data.token:"",o=t&&t.data&&t.data.status?t.data.status:"";window.localStorage.setItem("cc-pn-subscription-popup",o),window.localStorage.setItem("cc-pn-subscription-token",e),carecartJquery("#cc-pn-table").hide(),window.localStorage.setItem("cartHash_cached",""),abandonedCart.process(0)},!1)}var abandonedCart=new AbandonedCart;abandonedCart.init(abandonedCart.process,[0]);
